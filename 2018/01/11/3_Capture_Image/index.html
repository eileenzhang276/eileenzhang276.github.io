<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="Today I learned how to take a image by your camera and display it on the UI. Step 1: Create a FileFirst need a path and a name to create a File: File outputImage = new File(getExternalCacheDir(), &amp;quo">
<meta name="keywords" content="image">
<meta property="og:type" content="article">
<meta property="og:title" content="Capture Image">
<meta property="og:url" content="http://yoursite.com/2018/01/11/3_Capture_Image/index.html">
<meta property="og:site_name" content="走路草的博客">
<meta property="og:description" content="Today I learned how to take a image by your camera and display it on the UI. Step 1: Create a FileFirst need a path and a name to create a File: File outputImage = new File(getExternalCacheDir(), &amp;quo">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2018-01-29T06:02:41.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Capture Image">
<meta name="twitter:description" content="Today I learned how to take a image by your camera and display it on the UI. Step 1: Create a FileFirst need a path and a name to create a File: File outputImage = new File(getExternalCacheDir(), &amp;quo">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>Capture Image</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- rss -->
    
    
</head>

<body>
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/probberechts">Projects</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2018/01/11/4_Select_Image_from_Camera_Roll/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2018/01/10/2_About_Sections/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2018/01/11/3_Capture_Image/"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/2018/01/11/3_Capture_Image/&text=Capture Image"><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2018/01/11/3_Capture_Image/&title=Capture Image"><i class="fa fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2018/01/11/3_Capture_Image/&is_video=false&description=Capture Image"><i class="fa fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Capture Image&body=Check out this article: http://yoursite.com/2018/01/11/3_Capture_Image/"><i class="fa fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/2018/01/11/3_Capture_Image/&title=Capture Image"><i class="fa fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/2018/01/11/3_Capture_Image/&title=Capture Image"><i class="fa fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2018/01/11/3_Capture_Image/&title=Capture Image"><i class="fa fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/2018/01/11/3_Capture_Image/&title=Capture Image"><i class="fa fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2018/01/11/3_Capture_Image/&name=Capture Image&description="><i class="fa fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Step-1-Create-a-File"><span class="toc-number">1.</span> <span class="toc-text">Step 1: Create a File</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Step-2-Get-the-Uri-of-the-File"><span class="toc-number">2.</span> <span class="toc-text">Step 2: Get the Uri of the File</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#For-API-version-lt-24"><span class="toc-number">2.1.</span> <span class="toc-text">For API version &lt; 24</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#For-API-version-gt-24"><span class="toc-number">2.2.</span> <span class="toc-text">For API version &gt;= 24</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Step-3-Create-Intent-to-open-camera"><span class="toc-number">3.</span> <span class="toc-text">Step 3: Create Intent to open camera</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Step-4-Start-activity-for-result"><span class="toc-number">4.</span> <span class="toc-text">Step 4: Start activity for result</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Step-5-Check-requestCode-and-resultCode-in-onActivityResult"><span class="toc-number">5.</span> <span class="toc-text">Step 5: Check requestCode and resultCode in onActivityResult</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Step-6-Decode-the-Uri-to-Bitmap"><span class="toc-number">6.</span> <span class="toc-text">Step 6: Decode the Uri to Bitmap</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Step-7-Set-the-decoded-Bitmap-to-ImageView"><span class="toc-number">7.</span> <span class="toc-text">Step 7: Set the decoded Bitmap to ImageView</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index width mx-auto px2 my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Capture Image
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">走路草的博客</span>
      </span>
      
    <div class="postdate">
        <time datetime="2018-01-12T05:53:06.000Z" itemprop="datePublished">2018-01-11</time>
    </div>


      
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/image/">image</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>Today I learned how to take a image by your camera and display it on the UI.</p>
<h2 id="Step-1-Create-a-File"><a href="#Step-1-Create-a-File" class="headerlink" title="Step 1: Create a File"></a>Step 1: Create a File</h2><p>First need a path and a name to create a File:</p>
<pre><code>File outputImage = new File(getExternalCacheDir(), &quot;output_image.jpg&quot;);
</code></pre><p>The path we provide here is the external cache directory in SD card. Reason is: only writing to this part of SD card does not need to ask for permission. Also note that before android 4.4, we still need to declare the permission in manifest to write to external cache directory.</p>
<p>Then check if the file name is already exits. Delete if exist. Then create.</p>
<pre><code>try {
  if (outputImage.exists()) { 
   outputImage.delete();
 }
   outputImage.createNewFile();
 } catch (IOException e) {
   e.printStackTrace();
 }
</code></pre><h2 id="Step-2-Get-the-Uri-of-the-File"><a href="#Step-2-Get-the-Uri-of-the-File" class="headerlink" title="Step 2: Get the Uri of the File"></a>Step 2: Get the Uri of the File</h2><h3 id="For-API-version-lt-24"><a href="#For-API-version-lt-24" class="headerlink" title="For API version &lt; 24"></a>For API version &lt; 24</h3><p>Directly get the Uri from the file</p>
<pre><code>imageUri = Uri.fromFile(outputImage);
</code></pre><p>However this is considered to be not safe after api version 24.</p>
<h3 id="For-API-version-gt-24"><a href="#For-API-version-gt-24" class="headerlink" title="For API version &gt;= 24"></a>For API version &gt;= 24</h3><pre><code>imageUri = FileProvider.getUriForFile(HelloWorldActivity.this,
               &quot;com.eileen.helloworld.helloWorldActivity.FileProvider&quot;,
               outputImage);
</code></pre><p>FileProvide is a special Content Provider. It can selectively share the capsulated Uri with external users.</p>
<p>Note that since it is Content Provide, so need to be declared in Manifest.</p>
<h2 id="Step-3-Create-Intent-to-open-camera"><a href="#Step-3-Create-Intent-to-open-camera" class="headerlink" title="Step 3: Create Intent to open camera"></a>Step 3: Create Intent to open camera</h2><p>Need to tell the intent: operation and request code.<br>    Intent intent = new Intent(“android.media.action.IMAGE_CAPTURE”);<br>        intent.putExtra(MediaStore.EXTRA_OUTPUT, imageUri);</p>
<h2 id="Step-4-Start-activity-for-result"><a href="#Step-4-Start-activity-for-result" class="headerlink" title="Step 4: Start activity for result"></a>Step 4: Start activity for result</h2><pre><code>startActivityForResult(intent, CAPTURE_PHOTO);
</code></pre><h2 id="Step-5-Check-requestCode-and-resultCode-in-onActivityResult"><a href="#Step-5-Check-requestCode-and-resultCode-in-onActivityResult" class="headerlink" title="Step 5: Check requestCode and resultCode in onActivityResult"></a>Step 5: Check requestCode and resultCode in onActivityResult</h2><h2 id="Step-6-Decode-the-Uri-to-Bitmap"><a href="#Step-6-Decode-the-Uri-to-Bitmap" class="headerlink" title="Step 6: Decode the Uri to Bitmap"></a>Step 6: Decode the Uri to Bitmap</h2><pre><code>Bitmap bitmap = BitmapFactory.decodeStream(getContentResolver().openInputStream(imageUri));
</code></pre><p>Note that only when the image are decoded to Bitmap it can attach to the ImageView in the layout.</p>
<h2 id="Step-7-Set-the-decoded-Bitmap-to-ImageView"><a href="#Step-7-Set-the-decoded-Bitmap-to-ImageView" class="headerlink" title="Step 7: Set the decoded Bitmap to ImageView"></a>Step 7: Set the decoded Bitmap to ImageView</h2><pre><code>mImage.setImageBitmap(bitmap);
</code></pre><p>今天又继续打了乒乓球，正手扣球已经炉火纯青啦，接下来注意加强反手的训练。:-)</p>

  </div>
</article>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/probberechts">Projects</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Step-1-Create-a-File"><span class="toc-number">1.</span> <span class="toc-text">Step 1: Create a File</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Step-2-Get-the-Uri-of-the-File"><span class="toc-number">2.</span> <span class="toc-text">Step 2: Get the Uri of the File</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#For-API-version-lt-24"><span class="toc-number">2.1.</span> <span class="toc-text">For API version &lt; 24</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#For-API-version-gt-24"><span class="toc-number">2.2.</span> <span class="toc-text">For API version &gt;= 24</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Step-3-Create-Intent-to-open-camera"><span class="toc-number">3.</span> <span class="toc-text">Step 3: Create Intent to open camera</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Step-4-Start-activity-for-result"><span class="toc-number">4.</span> <span class="toc-text">Step 4: Start activity for result</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Step-5-Check-requestCode-and-resultCode-in-onActivityResult"><span class="toc-number">5.</span> <span class="toc-text">Step 5: Check requestCode and resultCode in onActivityResult</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Step-6-Decode-the-Uri-to-Bitmap"><span class="toc-number">6.</span> <span class="toc-text">Step 6: Decode the Uri to Bitmap</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Step-7-Set-the-decoded-Bitmap-to-ImageView"><span class="toc-number">7.</span> <span class="toc-text">Step 7: Set the decoded Bitmap to ImageView</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2018/01/11/3_Capture_Image/"><i class="fa fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/2018/01/11/3_Capture_Image/&text=Capture Image"><i class="fa fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2018/01/11/3_Capture_Image/&title=Capture Image"><i class="fa fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2018/01/11/3_Capture_Image/&is_video=false&description=Capture Image"><i class="fa fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Capture Image&body=Check out this article: http://yoursite.com/2018/01/11/3_Capture_Image/"><i class="fa fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/2018/01/11/3_Capture_Image/&title=Capture Image"><i class="fa fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/2018/01/11/3_Capture_Image/&title=Capture Image"><i class="fa fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2018/01/11/3_Capture_Image/&title=Capture Image"><i class="fa fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/2018/01/11/3_Capture_Image/&title=Capture Image"><i class="fa fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2018/01/11/3_Capture_Image/&name=Capture Image&description="><i class="fa fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
      <ul>
        <li id="toc"><a class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li>
        <li id="share"><a class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></li>
        <li id="top" style="display:none"><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li>
        <li id="menu"><a class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li>
      </ul>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2018 走路草
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/probberechts">Projects</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="/lib/meslo-LG/styles.css">
<link rel="stylesheet" href="/lib/justified-gallery/justifiedGallery.min.css">

<!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-86660611-1', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Disqus Comments -->


