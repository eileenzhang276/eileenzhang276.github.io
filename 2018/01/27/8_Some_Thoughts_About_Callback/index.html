<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="This blog will focus on how to use callback in a component. What is callback?Callback is a piece of executable code that can be passed around as an argument. It can be called to get executed whenever">
<meta property="og:type" content="article">
<meta property="og:title" content="Some Thoughts About Callback">
<meta property="og:url" content="http://yoursite.com/2018/01/27/8_Some_Thoughts_About_Callback/index.html">
<meta property="og:site_name" content="走路草的博客">
<meta property="og:description" content="This blog will focus on how to use callback in a component. What is callback?Callback is a piece of executable code that can be passed around as an argument. It can be called to get executed whenever">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://i.imgur.com/U79FSCJ.jpg">
<meta property="og:image" content="https://i.imgur.com/WdJWgTD.jpg">
<meta property="og:updated_time" content="2018-01-29T06:03:28.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Some Thoughts About Callback">
<meta name="twitter:description" content="This blog will focus on how to use callback in a component. What is callback?Callback is a piece of executable code that can be passed around as an argument. It can be called to get executed whenever">
<meta name="twitter:image" content="https://i.imgur.com/U79FSCJ.jpg">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>Some Thoughts About Callback</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- rss -->
    
    
</head>

<body>
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/probberechts">Projects</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2018/01/27/9_Camera_Roll_Select_And_Deselect/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2018/01/23/7_About_Android_view/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2018/01/27/8_Some_Thoughts_About_Callback/"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/2018/01/27/8_Some_Thoughts_About_Callback/&text=Some Thoughts About Callback"><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2018/01/27/8_Some_Thoughts_About_Callback/&title=Some Thoughts About Callback"><i class="fa fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2018/01/27/8_Some_Thoughts_About_Callback/&is_video=false&description=Some Thoughts About Callback"><i class="fa fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Some Thoughts About Callback&body=Check out this article: http://yoursite.com/2018/01/27/8_Some_Thoughts_About_Callback/"><i class="fa fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/2018/01/27/8_Some_Thoughts_About_Callback/&title=Some Thoughts About Callback"><i class="fa fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/2018/01/27/8_Some_Thoughts_About_Callback/&title=Some Thoughts About Callback"><i class="fa fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2018/01/27/8_Some_Thoughts_About_Callback/&title=Some Thoughts About Callback"><i class="fa fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/2018/01/27/8_Some_Thoughts_About_Callback/&title=Some Thoughts About Callback"><i class="fa fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2018/01/27/8_Some_Thoughts_About_Callback/&name=Some Thoughts About Callback&description="><i class="fa fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#What-is-callback"><span class="toc-number">1.</span> <span class="toc-text">What is callback?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Why-do-we-need-callback-in-component"><span class="toc-number">2.</span> <span class="toc-text">Why do we need callback in component?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#When-do-we-need-callback"><span class="toc-number">3.</span> <span class="toc-text">When do we need callback?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Where-do-we-define-callback-interface"><span class="toc-number">4.</span> <span class="toc-text">Where do we define callback interface?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Where-do-we-create-implementation-for-callback"><span class="toc-number">5.</span> <span class="toc-text">Where do we create implementation for callback?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#How-do-we-pass-around-a-callback-method"><span class="toc-number">6.</span> <span class="toc-text">How do we pass around a callback method?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Look-at-some-examples"><span class="toc-number">7.</span> <span class="toc-text">Look at some examples</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Some-more-thoughts"><span class="toc-number">8.</span> <span class="toc-text">Some more thoughts</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index width mx-auto px2 my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Some Thoughts About Callback
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">走路草的博客</span>
      </span>
      
    <div class="postdate">
        <time datetime="2018-01-28T02:07:02.000Z" itemprop="datePublished">2018-01-27</time>
    </div>


      

    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>This blog will focus on how to use callback in a component.</p>
<h2 id="What-is-callback"><a href="#What-is-callback" class="headerlink" title="What is callback?"></a>What is callback?</h2><p>Callback is a piece of executable code that can be passed around as an argument. It can be called to get executed whenever needed at a later time or immediately.  </p>
<h2 id="Why-do-we-need-callback-in-component"><a href="#Why-do-we-need-callback-in-component" class="headerlink" title="Why do we need callback in component?"></a>Why do we need callback in component?</h2><p>When creating component, we pass to it many properties like height, width, etc. Besides this, we can also pass in a callback parameter so that we gives our component anther power to do some specific things. </p>
<h2 id="When-do-we-need-callback"><a href="#When-do-we-need-callback" class="headerlink" title="When do we need callback?"></a>When do we need callback?</h2><p>Normally when the component UI layer detects some changes (e.g., user’s click), it needs to tell the controller in the back and trigger some completed data calculation or business logic. So how to trigger this? Call the callback. </p>
<p>The callback will be defined as a component property and will be passed in from the controller that creats this component. Then the component can further pass down this callback to it’s child component. When the inner most component receives an user event and decides it’s the time to execute the callback code in controller, it will simply needs to call the callback and the related code in controller will get execulated. Note that the callback is also a way for the inner most component to pass some data into the controller to do the calculation. </p>
<h2 id="Where-do-we-define-callback-interface"><a href="#Where-do-we-define-callback-interface" class="headerlink" title="Where do we define callback interface?"></a>Where do we define callback interface?</h2><p>Since callback is first defined in the root component as a property, we normally define this interface in the root component class.</p>
<h2 id="Where-do-we-create-implementation-for-callback"><a href="#Where-do-we-create-implementation-for-callback" class="headerlink" title="Where do we create implementation for callback?"></a>Where do we create implementation for callback?</h2><p>Since the controller that creates an instance of the root component will need to supply this callback, the implementation of a callback will need to be defined in the controller.</p>
<h2 id="How-do-we-pass-around-a-callback-method"><a href="#How-do-we-pass-around-a-callback-method" class="headerlink" title="How do we pass around a callback method?"></a>How do we pass around a callback method?</h2><p>First, define in the root component.</p>
<p>Then, think about what data we want from the user event? Keep them as input arguments.</p>
<p>Next, think about is there data we want from the controller’s calculation so that we can use it directly in the child component? If yes, give the callback a return value, if not, leave the return value as void.</p>
<p>Then, we implement the callback in the controller where we want to create our root component.</p>
<p>Finally, pass this callback as a property when we create our root component.</p>
<h2 id="Look-at-some-examples"><a href="#Look-at-some-examples" class="headerlink" title="Look at some examples"></a>Look at some examples</h2><p>This will be a general pattern:</p>
<pre><code>RootComponentSpec {
    Callback {
        doSomething();
    }
...    
}

Controller implements RootComponentSpec.Callback {
    @Override
    doSomething() {
        // the real calculation here.
    }

    RootComponent.create().callback(this);
}

// Somewhere inside the rootComponent has a childComponent. Rootcomponent passes this callback all the way down to the childComponent. 
ChildComponentSpec {
// Define a clickhandler.
    onclick() {
        mCallback.doSomething();
    }
}
</code></pre><p><strong>Real Examples</strong></p>
<p>When looking for callbacks, first think about what are the user events we want to handle?</p>
<ul>
<li>Click media to select media </li>
<li>Click media to add to composer</li>
<li>Click permission block to ask for permission</li>
<li>Click camera to launch full screen camera</li>
<li>Click capture button to capture a photo</li>
<li>Click rotate button to rotate the screen</li>
<li>Click flash button to change the flash options</li>
</ul>
<p>The first 3 are related to the left part of the camera row, so they can be inside callback interface 1. the last 4 are related to the right part of the camera row, so they will be inside callback interface 2. </p>
<p>Example 1:<br><img src="https://i.imgur.com/U79FSCJ.jpg" alt="About the media callback"></p>
<p>Example 2:<br><img src="https://i.imgur.com/WdJWgTD.jpg" alt="About the camera callbakc"></p>
<h2 id="Some-more-thoughts"><a href="#Some-more-thoughts" class="headerlink" title="Some more thoughts"></a>Some more thoughts</h2><ul>
<li><p>Callbacks associated with components are like clickHandlers. Components are UI elements and can’t not handle some click events. So these events needs to be handled by controller and callbacks are like a bridge to let component to directly talk to controller: Hey, I am clicked! Please do whatever you’re supposed to do!</p>
</li>
<li><p>Callbacks are like questionaires defined by UI component. UI put all the questions it doesn’t know where and ask controller for help. Controller answers all the questions in the questionaire, pass it to component when initiating the component.</p>
</li>
</ul>

  </div>
</article>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/probberechts">Projects</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#What-is-callback"><span class="toc-number">1.</span> <span class="toc-text">What is callback?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Why-do-we-need-callback-in-component"><span class="toc-number">2.</span> <span class="toc-text">Why do we need callback in component?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#When-do-we-need-callback"><span class="toc-number">3.</span> <span class="toc-text">When do we need callback?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Where-do-we-define-callback-interface"><span class="toc-number">4.</span> <span class="toc-text">Where do we define callback interface?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Where-do-we-create-implementation-for-callback"><span class="toc-number">5.</span> <span class="toc-text">Where do we create implementation for callback?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#How-do-we-pass-around-a-callback-method"><span class="toc-number">6.</span> <span class="toc-text">How do we pass around a callback method?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Look-at-some-examples"><span class="toc-number">7.</span> <span class="toc-text">Look at some examples</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Some-more-thoughts"><span class="toc-number">8.</span> <span class="toc-text">Some more thoughts</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2018/01/27/8_Some_Thoughts_About_Callback/"><i class="fa fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/2018/01/27/8_Some_Thoughts_About_Callback/&text=Some Thoughts About Callback"><i class="fa fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2018/01/27/8_Some_Thoughts_About_Callback/&title=Some Thoughts About Callback"><i class="fa fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2018/01/27/8_Some_Thoughts_About_Callback/&is_video=false&description=Some Thoughts About Callback"><i class="fa fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Some Thoughts About Callback&body=Check out this article: http://yoursite.com/2018/01/27/8_Some_Thoughts_About_Callback/"><i class="fa fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/2018/01/27/8_Some_Thoughts_About_Callback/&title=Some Thoughts About Callback"><i class="fa fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/2018/01/27/8_Some_Thoughts_About_Callback/&title=Some Thoughts About Callback"><i class="fa fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2018/01/27/8_Some_Thoughts_About_Callback/&title=Some Thoughts About Callback"><i class="fa fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/2018/01/27/8_Some_Thoughts_About_Callback/&title=Some Thoughts About Callback"><i class="fa fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2018/01/27/8_Some_Thoughts_About_Callback/&name=Some Thoughts About Callback&description="><i class="fa fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
      <ul>
        <li id="toc"><a class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li>
        <li id="share"><a class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></li>
        <li id="top" style="display:none"><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li>
        <li id="menu"><a class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li>
      </ul>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2018 走路草
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/probberechts">Projects</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="/lib/meslo-LG/styles.css">
<link rel="stylesheet" href="/lib/justified-gallery/justifiedGallery.min.css">

<!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-86660611-1', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Disqus Comments -->


